{"id":"thingies-3y4","title":"Add upcoming command to show scheduled tasks","description":"## Problem\nThere's no `thingies upcoming` command to show tasks scheduled for future dates.\n\n## Current available commands\n```\nareas, inbox, projects, search, snapshot, tags, tasks, today\n```\n\n## Proposed behavior\n`thingies upcoming` should show tasks that are:\n- Scheduled for future dates (`start = 2` in database)\n- Not completed (`status = 0`)\n- Sorted by scheduled date\n\n## Database query logic\n```sql\nSELECT ... FROM TMTask t\nWHERE t.start = 2        -- scheduled for future\n  AND t.status = 0       -- incomplete\n  AND t.trashed = 0\nORDER BY t.startDate ASC -- binary-packed date sorts correctly\n```\n\n## Implementation\n1. Add `internal/cmd/upcoming.go` (similar to `today.go` and `inbox.go`)\n2. Add query method to `internal/db/queries.go`\n3. Register command in `internal/cmd/root.go`\n\n## Output\nShould show scheduled date (decoded from binary format) and task title, grouped or sorted by date.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-27T19:41:24.67211-05:00","created_by":"rob","updated_at":"2026-01-31T14:44:52.549854-05:00","closed_at":"2026-01-31T14:44:52.549854-05:00","close_reason":"Already implemented - command exists and works, CLI and API both return matching results","dependencies":[{"issue_id":"thingies-3y4","depends_on_id":"thingies-z7h","type":"blocks","created_at":"2026-01-27T19:41:33.406113-05:00","created_by":"rob"}]}
{"id":"thingies-a63","title":"Rewrite thingies CLI in Go","description":"Rewrite the Python thingies CLI as a Go CLI with full CRUD access to Things 3. Reads via SQLite, creates/updates via URL scheme, deletes via AppleScript.","notes":"COMPLETED: Go CLI implementation\n- Phase 1 (Core + Read): All list/show commands working\n- Phase 2 (Write): Create, complete, delete working via URL scheme and AppleScript\n- Phase 3 (Polish): Makefile, CLAUDE.md updated\n\nVERIFIED:\n- thingies today/inbox/tasks list/projects list/areas list/tags list\n- thingies search, snapshot\n- thingies tasks create/complete/delete\n- JSON output with --json flag\n- Date handling with Things-specific epoch for startDate/deadline\n\nREMAINING:\n- tasks update requires auth token from TMSettings (plist parsing not implemented)\n- Consider removing Python version after more testing","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-25T14:04:10.294652-05:00","created_by":"rob","updated_at":"2026-01-25T14:23:13.827615-05:00","closed_at":"2026-01-25T14:23:13.827615-05:00","close_reason":"Go CLI implementation complete - all core features working (list, show, create, complete, delete). Ready for testing."}
{"id":"thingies-cqm","title":"Fix task update --when to use URL scheme instead of AppleScript","description":"## Problem\nThe `tasks update --when` command uses AppleScript to set `activation date`, but this property is **read-only** in Things 3.\n\n```\nexecution error: Things3 got an error: Can't set activation date of selected to do to date \"Wednesday, January 28, 2026 at 7:37:46 PM\". (-10006)\n```\n\n## Current (broken) code in `applescript.go`\n```go\ncase \"tomorrow\":\n    statements = append(statements, `set activation date of theTodo to (current date) + 1 * days`)\ndefault:\n    statements = append(statements, fmt.Sprintf(`set activation date of theTodo to date \"%s\"`, params.When))\n```\n\n## Solution\nTwo options depending on the date value:\n\n### For predefined lists (today, tomorrow, anytime, someday)\nUse AppleScript `move` command:\n```applescript\nmove theTodo to list \"Today\"\nmove theTodo to list \"Tomorrow\"\nmove theTodo to list \"Anytime\"\nmove theTodo to list \"Someday\"\n```\n\n### For specific dates (YYYY-MM-DD)\nMust use Things URL scheme with auth token:\n```\nthings:///update?id=UUID\u0026auth-token=TOKEN\u0026when=2026-02-15\n```\n\n## Files to change\n- `internal/things/applescript.go`: Use `move to list` for predefined values\n- For specific dates, either:\n  - Fall back to URL scheme (requires implementing auth token retrieval)\n  - Or document as unsupported via AppleScript","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-27T19:41:13.333452-05:00","created_by":"rob","updated_at":"2026-01-27T19:44:48.737492-05:00","closed_at":"2026-01-27T19:44:48.737492-05:00","close_reason":"Fixed AppleScript when update to use move to list instead of read-only activation date"}
{"id":"thingies-d0l","title":"Group tasks by heading when showing a project","description":"When viewing a project with `projects show`, organize tasks under their headings instead of showing a flat list with redundant paths.\n\nCurrent output shows:\n```\nTasks\nTo7vzytv ○ Watch \"On Call\" on Amazon Prime (Home \u003e Want To \u003e Watch)\n5WWnkw66 ○ DJI Avata 2 FPV Drone (Home \u003e Want To \u003e Buy)\n```\n\nShould show:\n```\nWatch:\n  ○ Watch \"On Call\" on Amazon Prime\n  ○ Watch \"Pirate Radio\"\n\nBuy:\n  ○ DJI Avata 2 FPV Drone\n  ○ New MacBook Air M4 (2025)\n```\n\nTasks without a heading should appear first or last (TBD).","status":"open","priority":3,"issue_type":"feature","owner":"rob.barry@wsj.com","created_at":"2026-02-01T08:13:25.645059-05:00","created_by":"Rob Barry","updated_at":"2026-02-01T08:13:25.645059-05:00"}
{"id":"thingies-z7h","title":"Fix binary-packed date decoding in scanner.go","description":"## Problem\nThe `thingsDateToNullTime()` function in `internal/db/scanner.go` incorrectly treats `startDate` as an epoch-based timestamp. It's actually a binary-packed date.\n\n## Current (wrong) code\n```go\nconst thingsDateEpoch = 1636588800\nunixTime := int64(ts.Float64) + thingsDateEpoch\n```\n\n## Correct decoding\n`startDate` packs year/month/day into bits:\n- Bits 16-26: Year (11 bits)\n- Bits 12-15: Month (4 bits)\n- Bits 7-11: Day (5 bits)\n\n```go\ny_mask := 0x7FF0000  // bits 16-26\nm_mask := 0xF000     // bits 12-15\nd_mask := 0xF80      // bits 7-11\n\nyear := (startDate \u0026 y_mask) \u003e\u003e 16\nmonth := (startDate \u0026 m_mask) \u003e\u003e 12\nday := (startDate \u0026 d_mask) \u003e\u003e 7\n```\n\n## Verification\nTested with known values:\n- 132786048 → 2026-02-15 ✓\n- 132783616 → 2026-01-28 ✓\n- 132759680 → 2025-12-01 ✓\n\n## Files to change\n- `internal/db/scanner.go`: Replace `thingsDateToNullTime()` with binary decoding","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-27T19:40:59.400574-05:00","created_by":"rob","updated_at":"2026-01-27T19:45:00.961923-05:00","closed_at":"2026-01-27T19:45:00.961923-05:00","close_reason":"Fixed binary date decoding"}
