{"id":"thingies-01t","title":"Add serve command with basic HTTP server infrastructure","description":"Create internal/server/ package with:\n- Server struct wrapping net/http.Server\n- Configuration (port, host, auth token)\n- Graceful shutdown support\n- Health check endpoint (/health)\n- CORS middleware for local development\n- Logging middleware\n\nAdd serve.go command in internal/cmd/ that:\n- Accepts --port flag (default 8080)\n- Accepts --host flag (default 0.0.0.0)\n- Opens ThingsDB and passes to handlers\n- Starts server with graceful shutdown on SIGINT/SIGTERM\n\nThis is the foundation all other endpoints build on.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-30T07:21:14.623963-05:00","updated_at":"2026-01-30T07:21:14.623963-05:00"}
{"id":"thingies-05d","title":"Add ID column to table list views","description":"Add UUID column to all table list formatters in `internal/output/table.go`.\n\n## Files to modify\n- `internal/output/table.go`\n\n## Functions to update\n1. `FormatTasks()` (line 51) - Add \"ID\" to Headers, add task.UUID to Row\n2. `FormatProjects()` (line 152) - Add \"ID\" to Headers, add proj.UUID to Row  \n3. `FormatAreas()` (line 222) - Add \"ID\" to Headers, add area.UUID to Row\n4. `FormatSearchResults()` (line 303) - Add \"ID\" to Headers, add task.UUID to Row\n\n## Implementation\n- Add \"ID\" as FIRST column (before Title) so it's easy to copy\n- Use truncated UUID (first 8 chars) to save horizontal space\n- Style with dim color to not distract from content\n- Full UUID available via `show` command or `--json`\n\n## Example output\n```\nâ•­â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â•®\nâ”‚ID      â”‚Title                â”‚Statusâ”‚Projectâ”‚Areaâ”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤\nâ”‚abc12345â”‚My task title        â”‚â—‹     â”‚Bills  â”‚Homeâ”‚\nâ•°â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â•¯\n```","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-28T08:07:26.51886-05:00","updated_at":"2026-01-30T07:21:30.106691-05:00","closed_at":"2026-01-30T07:21:30.106691-05:00","close_reason":"implemented","dependencies":[{"issue_id":"thingies-05d","depends_on_id":"thingies-4se","type":"parent-child","created_at":"2026-01-28T08:07:49.619796-05:00","created_by":"daemon"}]}
{"id":"thingies-1hm","title":"Add write endpoints for task operations","description":"Expose task write operations as REST endpoints:\n\nPOST /tasks - Create task\n  Request body: {title, notes, when, deadline, tags[], list, heading, checklistItems[]}\n  Uses things.BuildAddURL() + things.OpenURL()\n\nPATCH /tasks/:uuid - Update task\n  Request body: {title, notes, when, deadline, tags[], addTags[]}\n  Uses things.BuildUpdateURL() (requires auth token)\n\nPOST /tasks/:uuid/complete - Mark complete\n  Uses things.CompleteTask() AppleScript\n\nPOST /tasks/:uuid/cancel - Mark canceled  \n  Uses things.CancelTask() AppleScript\n\nDELETE /tasks/:uuid - Delete (move to trash)\n  Uses things.DeleteTask() AppleScript\n\nPOST /tasks/:uuid/move-to-today - Move to Today\nPOST /tasks/:uuid/move-to-someday - Move to Someday\n\nAuth token passed via X-Things-Auth-Token header or --auth-token flag on serve.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-30T07:21:32.407307-05:00","updated_at":"2026-01-30T07:21:32.407307-05:00","dependencies":[{"issue_id":"thingies-1hm","depends_on_id":"thingies-01t","type":"blocks","created_at":"2026-01-30T07:22:04.252116-05:00","created_by":"daemon"}]}
{"id":"thingies-376","title":"Add read endpoints for areas and tags","description":"Expose area and tag queries as REST endpoints:\n\nGET /areas - List all visible areas with counts\nGET /areas/:uuid - Single area details\nGET /areas/:uuid/tasks - Loose tasks in area (not in projects)\nGET /areas/:uuid/projects - Projects in area\n\nGET /tags - List all tags with usage counts\nGET /tags/:name/tasks - Tasks with a specific tag\n\nReuse db.ListAreas(), db.GetArea(), db.GetAreaTasks(), db.GetAreaProjects(), db.ListTags(), db.GetTag().","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-30T07:21:30.935446-05:00","updated_at":"2026-01-30T07:21:30.935446-05:00","dependencies":[{"issue_id":"thingies-376","depends_on_id":"thingies-01t","type":"blocks","created_at":"2026-01-30T07:22:04.070541-05:00","created_by":"daemon"}]}
{"id":"thingies-3y4","title":"Add upcoming command to show scheduled tasks","description":"## Problem\nThere's no `thingies upcoming` command to show tasks scheduled for future dates.\n\n## Current available commands\n```\nareas, inbox, projects, search, snapshot, tags, tasks, today\n```\n\n## Proposed behavior\n`thingies upcoming` should show tasks that are:\n- Scheduled for future dates (`start = 2` in database)\n- Not completed (`status = 0`)\n- Sorted by scheduled date\n\n## Database query logic\n```sql\nSELECT ... FROM TMTask t\nWHERE t.start = 2        -- scheduled for future\n  AND t.status = 0       -- incomplete\n  AND t.trashed = 0\nORDER BY t.startDate ASC -- binary-packed date sorts correctly\n```\n\n## Implementation\n1. Add `internal/cmd/upcoming.go` (similar to `today.go` and `inbox.go`)\n2. Add query method to `internal/db/queries.go`\n3. Register command in `internal/cmd/root.go`\n\n## Output\nShould show scheduled date (decoded from binary format) and task title, grouped or sorted by date.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-27T19:41:24.67211-05:00","updated_at":"2026-01-30T07:21:30.099968-05:00","closed_at":"2026-01-30T07:21:30.099968-05:00","close_reason":"implemented","dependencies":[{"issue_id":"thingies-3y4","depends_on_id":"thingies-z7h","type":"blocks","created_at":"2026-01-27T19:41:33.406113-05:00","created_by":"rob"}]}
{"id":"thingies-4se","title":"Always show IDs in all output","description":"Every task, project, and area must display its UUID in all output formats. IDs are essential for subsequent update/delete/complete operations.\n\n## Problem\nCurrently, list views and snapshot don't show IDs, making it impossible to copy an ID for follow-up commands without using `--json` or `show`.\n\n## Scope\n- Table list views: tasks, projects, areas, search results\n- Snapshot command: today, inbox, areas, projects, tasks\n- Consider ID format: full UUID vs truncated (first 8 chars)","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-28T08:07:14.732976-05:00","updated_at":"2026-01-30T07:21:30.109561-05:00","closed_at":"2026-01-30T07:21:30.109561-05:00","close_reason":"implemented"}
{"id":"thingies-6gl","title":"Add read endpoints for views (today/inbox/upcoming/someday/logbook)","description":"Expose the special views as REST endpoints:\n\nGET /today - Today's tasks (db.ListTasks with today filter)\nGET /inbox - Inbox tasks (db.GetInboxTasks)\nGET /upcoming - Upcoming scheduled tasks (db.GetUpcomingTasks)\n  - days (int): optional limit on days ahead\nGET /someday - Someday tasks (db.GetSomedayTasks)\nGET /logbook - Completed tasks (db.GetLogbook)\n  - limit (int): max results, default 50\nGET /deadlines - Tasks with upcoming deadlines\n  - days (int): days ahead to check, default 7\n\nThese map directly to existing db functions.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-30T07:21:16.947712-05:00","updated_at":"2026-01-30T07:21:16.947712-05:00","dependencies":[{"issue_id":"thingies-6gl","depends_on_id":"thingies-01t","type":"blocks","created_at":"2026-01-30T07:22:03.746686-05:00","created_by":"daemon"}]}
{"id":"thingies-8s7","title":"Add AppleScript functions for heading operations","description":"Add AppleScript functions to internal/things/applescript.go:\n\nfunc DeleteHeading(uuid string) error\n  - Deletes a heading via AppleScript\n  - Tasks under the heading move to project root\n  \nfunc RenameHeading(uuid, newTitle string) error\n  - Renames a heading via AppleScript\n\nBased on Python implementation:\n```applescript\ntell application \"Things3\"\n    set h to to do id \"UUID\"\n    delete h\n    return \"ok\"\nend tell\n```\n\nNote: Headings are stored as type=2 in TMTask, but Things AppleScript treats them as 'to do' objects.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-30T07:22:36.14976-05:00","updated_at":"2026-01-30T07:22:36.14976-05:00"}
{"id":"thingies-9ad","title":"Add db.GetProjectHeadings() query function","description":"Add a new query function to internal/db/queries.go:\n\nfunc (db *ThingsDB) GetProjectHeadings(projectUUID string) ([]Heading, error)\n\nQuery TMTask where type=2 (heading) and project=projectUUID.\nReturn list of {UUID, Title, Index} ordered by index.\n\nAlso add Heading model to internal/models/ if not present.\n\nThis is needed by the /projects/:uuid/headings endpoint.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-30T07:22:17.907359-05:00","updated_at":"2026-01-30T07:22:17.907359-05:00"}
{"id":"thingies-a63","title":"Rewrite thingies CLI in Go","description":"Rewrite the Python thingies CLI as a Go CLI with full CRUD access to Things 3. Reads via SQLite, creates/updates via URL scheme, deletes via AppleScript.","notes":"COMPLETED: Go CLI implementation\n- Phase 1 (Core + Read): All list/show commands working\n- Phase 2 (Write): Create, complete, delete working via URL scheme and AppleScript\n- Phase 3 (Polish): Makefile, CLAUDE.md updated\n\nVERIFIED:\n- thingies today/inbox/tasks list/projects list/areas list/tags list\n- thingies search, snapshot\n- thingies tasks create/complete/delete\n- JSON output with --json flag\n- Date handling with Things-specific epoch for startDate/deadline\n\nREMAINING:\n- tasks update requires auth token from TMSettings (plist parsing not implemented)\n- Consider removing Python version after more testing","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-25T14:04:10.294652-05:00","updated_at":"2026-01-25T14:23:13.827615-05:00","closed_at":"2026-01-25T14:23:13.827615-05:00","close_reason":"Go CLI implementation complete - all core features working (list, show, create, complete, delete). Ready for testing."}
{"id":"thingies-c1d","title":"Add read endpoints for tasks","description":"Expose existing db query functions as REST endpoints:\n\nGET /tasks - List tasks with query params:\n  - status (incomplete/completed/canceled/all)\n  - area (UUID or name)\n  - project (UUID or name)  \n  - tag (name)\n  - today (bool)\n  - include-future (bool)\n\nGET /tasks/:uuid - Single task details\n\nGET /tasks/search?q=... - Search tasks\n  - q (required): search query\n  - include-completed (bool)\n  - in-notes (bool)\n\nReuse db.ListTasks(), db.GetTask(), db.Search() directly.\nReturn JSON using existing models.TaskJSON structs.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-30T07:21:15.535821-05:00","updated_at":"2026-01-30T07:21:15.535821-05:00","dependencies":[{"issue_id":"thingies-c1d","depends_on_id":"thingies-01t","type":"blocks","created_at":"2026-01-30T07:22:03.599212-05:00","created_by":"daemon"}]}
{"id":"thingies-cqm","title":"Fix task update --when to use URL scheme instead of AppleScript","description":"## Problem\nThe `tasks update --when` command uses AppleScript to set `activation date`, but this property is **read-only** in Things 3.\n\n```\nexecution error: Things3 got an error: Can't set activation date of selected to do to date \"Wednesday, January 28, 2026 at 7:37:46 PM\". (-10006)\n```\n\n## Current (broken) code in `applescript.go`\n```go\ncase \"tomorrow\":\n    statements = append(statements, `set activation date of theTodo to (current date) + 1 * days`)\ndefault:\n    statements = append(statements, fmt.Sprintf(`set activation date of theTodo to date \"%s\"`, params.When))\n```\n\n## Solution\nTwo options depending on the date value:\n\n### For predefined lists (today, tomorrow, anytime, someday)\nUse AppleScript `move` command:\n```applescript\nmove theTodo to list \"Today\"\nmove theTodo to list \"Tomorrow\"\nmove theTodo to list \"Anytime\"\nmove theTodo to list \"Someday\"\n```\n\n### For specific dates (YYYY-MM-DD)\nMust use Things URL scheme with auth token:\n```\nthings:///update?id=UUID\u0026auth-token=TOKEN\u0026when=2026-02-15\n```\n\n## Files to change\n- `internal/things/applescript.go`: Use `move to list` for predefined values\n- For specific dates, either:\n  - Fall back to URL scheme (requires implementing auth token retrieval)\n  - Or document as unsupported via AppleScript","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-27T19:41:13.333452-05:00","updated_at":"2026-01-30T07:21:30.112265-05:00","closed_at":"2026-01-30T07:21:30.112265-05:00","close_reason":"implemented"}
{"id":"thingies-d1q","title":"Add read endpoints for projects","description":"Expose project queries as REST endpoints:\n\nGET /projects - List all projects\n  - include-completed (bool): include completed/canceled projects\n\nGET /projects/:uuid - Single project details with task counts\n\nGET /projects/:uuid/tasks - Tasks in a project\n  - include-completed (bool)\n\nGET /projects/:uuid/headings - Headings/sections in a project\n\nReuse db.ListProjects(), db.GetProject(), db.GetProjectTasks().\nNeed to add db.GetProjectHeadings() if not present.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-30T07:21:29.92162-05:00","updated_at":"2026-01-30T07:21:29.92162-05:00","dependencies":[{"issue_id":"thingies-d1q","depends_on_id":"thingies-01t","type":"blocks","created_at":"2026-01-30T07:22:03.891262-05:00","created_by":"daemon"},{"issue_id":"thingies-d1q","depends_on_id":"thingies-9ad","type":"blocks","created_at":"2026-01-30T07:22:22.322249-05:00","created_by":"daemon"}]}
{"id":"thingies-d5u","title":"Add write endpoints for project operations","description":"Expose project write operations as REST endpoints:\n\nPOST /projects - Create project\n  Request body: {title, notes, when, deadline, tags[], areaId, todos[], headings[]}\n  Uses things.BuildAddProjectURL() + things.OpenURL()\n\nPATCH /projects/:uuid - Update project\n  Request body: {title, notes, deadline, tags[]}\n  Uses things.UpdateProject() AppleScript\n\nPOST /projects/:uuid/complete - Mark complete\n  Uses things.CompleteProject() AppleScript\n\nDELETE /projects/:uuid - Delete (move to trash)\n  Uses things.DeleteProject() AppleScript","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-30T07:21:44.673894-05:00","updated_at":"2026-01-30T07:21:44.673894-05:00","dependencies":[{"issue_id":"thingies-d5u","depends_on_id":"thingies-01t","type":"blocks","created_at":"2026-01-30T07:22:04.397207-05:00","created_by":"daemon"}]}
{"id":"thingies-e14","title":"Add HTTP server (thingies serve)","description":"Add a 'thingies serve' command that exposes the CLI functionality as a REST API.\n\nThis replaces the ad-hoc Python FastAPI server in signalbot2 with a proper Go implementation that:\n- Uses the same database queries as the CLI\n- Returns consistent JSON responses\n- Supports all read operations (tasks, projects, areas, tags, views)\n- Supports all write operations (create, update, complete, delete)\n- Can be run standalone or via pm2/systemd\n- Exposed over Tailscale at https://vega.tailnet.ts.net/\n\nMigrating from Python to Go consolidates everything into one binary and ensures CLI and API stay perfectly in sync.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-30T07:21:57.350213-05:00","updated_at":"2026-01-30T07:21:57.350213-05:00"}
{"id":"thingies-gxv","title":"Show project ID and heading ID in task details view","description":"In the task details view (thingies tasks show \u003cuuid\u003e), add:\n- Project UUID alongside the project title\n- Heading UUID and title if the task is under a heading\n\nCurrently the output shows project_title but not project_uuid, and heading info may be missing entirely. This makes it harder to use the CLI output for scripting or follow-up operations that need these IDs.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-30T07:18:26.666997-05:00","updated_at":"2026-01-30T07:18:33.886343-05:00"}
{"id":"thingies-kcj","title":"Add write endpoints for heading operations","description":"Expose heading management as REST endpoints:\n\nDELETE /headings/:uuid - Delete heading (tasks move to project root)\n  Uses AppleScript delete\n\nPATCH /headings/:uuid - Rename heading\n  Request body: {title}\n  Uses AppleScript to set name\n\nNote: Creating headings on existing projects is not supported by Things AppleScript.\nHeadings can only be created during project creation via the JSON URL scheme.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-30T07:21:46.171762-05:00","updated_at":"2026-01-30T07:21:46.171762-05:00","dependencies":[{"issue_id":"thingies-kcj","depends_on_id":"thingies-01t","type":"blocks","created_at":"2026-01-30T07:22:04.554883-05:00","created_by":"daemon"},{"issue_id":"thingies-kcj","depends_on_id":"thingies-8s7","type":"blocks","created_at":"2026-01-30T07:22:40.444586-05:00","created_by":"daemon"}]}
{"id":"thingies-oxf","title":"Add snapshot endpoint","description":"Expose hierarchical snapshot as REST endpoint:\n\nGET /snapshot - Full hierarchical dump for system prompts\n  Returns: {snapshot: string} with formatted text\n\nShould match the Python API's snapshot output:\n- Organizes by: Area â†’ Project â†’ Heading â†’ Task\n- Sections: TODAY, ANYTIME, UPCOMING, SOMEDAY, INBOX\n- Each task shows ID, deadline if set, scheduled date if future\n- Deduplicates tasks across sections\n\nCan reuse logic from internal/cmd/snapshot.go but output as JSON wrapper.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-30T07:21:47.802234-05:00","updated_at":"2026-01-30T07:21:47.802234-05:00","dependencies":[{"issue_id":"thingies-oxf","depends_on_id":"thingies-01t","type":"blocks","created_at":"2026-01-30T07:22:04.703562-05:00","created_by":"daemon"}]}
{"id":"thingies-pk1","title":"Add IDs to snapshot output","description":"Add IDs to the snapshot command's pretty-print output in `internal/cmd/snapshot.go`.\n\n## File to modify\n- `internal/cmd/snapshot.go`\n\n## Locations in `printSnapshot()` (lines 122-199)\n1. Today tasks (line 143): Add task ID\n2. Inbox tasks (line 152): Add task ID\n3. Area headers (line 164): Add area ID\n4. Project headers (line 169): Add project ID\n5. Project tasks (line 173): Add task ID\n6. Area direct tasks (line 180): Add task ID\n\n## Implementation\n- Show truncated ID (first 8 chars) in dim style after each item\n- Format: `â—‹ Task title                              (abc12345)`\n- For areas/projects with counts, put ID before count: `â–  Work (abc12345) (17)`\n- Or: `â–  Work (17)                              [abc12345]`\n\n## Example output\n```\nðŸ“… Today\n  â—‹ Pay rent                                (abc12345)\n  â—‹ Call mom                                (def67890)\n\nâ–  Work (abc12345) (17)\n  â–¸ Project Name (xyz98765) (3)\n    â—‹ Task one                              (111aaaaa)\n    â—‹ Task two                              (222bbbbb)\n```\n\n## Note\nJSON output (`--json`) already includes full UUIDs via TaskJSON/ProjectJSON structs.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-28T08:07:38.234137-05:00","updated_at":"2026-01-30T07:21:30.103884-05:00","closed_at":"2026-01-30T07:21:30.103884-05:00","close_reason":"implemented","dependencies":[{"issue_id":"thingies-pk1","depends_on_id":"thingies-4se","type":"parent-child","created_at":"2026-01-28T08:07:49.7927-05:00","created_by":"daemon"}]}
{"id":"thingies-z7h","title":"Fix binary-packed date decoding in scanner.go","description":"## Problem\nThe `thingsDateToNullTime()` function in `internal/db/scanner.go` incorrectly treats `startDate` as an epoch-based timestamp. It's actually a binary-packed date.\n\n## Current (wrong) code\n```go\nconst thingsDateEpoch = 1636588800\nunixTime := int64(ts.Float64) + thingsDateEpoch\n```\n\n## Correct decoding\n`startDate` packs year/month/day into bits:\n- Bits 16-26: Year (11 bits)\n- Bits 12-15: Month (4 bits)\n- Bits 7-11: Day (5 bits)\n\n```go\ny_mask := 0x7FF0000  // bits 16-26\nm_mask := 0xF000     // bits 12-15\nd_mask := 0xF80      // bits 7-11\n\nyear := (startDate \u0026 y_mask) \u003e\u003e 16\nmonth := (startDate \u0026 m_mask) \u003e\u003e 12\nday := (startDate \u0026 d_mask) \u003e\u003e 7\n```\n\n## Verification\nTested with known values:\n- 132786048 â†’ 2026-02-15 âœ“\n- 132783616 â†’ 2026-01-28 âœ“\n- 132759680 â†’ 2025-12-01 âœ“\n\n## Files to change\n- `internal/db/scanner.go`: Replace `thingsDateToNullTime()` with binary decoding","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-27T19:40:59.400574-05:00","updated_at":"2026-01-30T07:21:30.096186-05:00","closed_at":"2026-01-30T07:21:30.096186-05:00","close_reason":"implemented"}
